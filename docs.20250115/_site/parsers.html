<!doctype html>














<!-- `site.alt_lang` can specify a language different from the UI -->
<html lang="en" >
  <head>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7">
  <meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e">
  <meta name="mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta
    name="viewport"
    content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover"
  ><!-- Setup Open Graph image -->

  

  <!-- Begin Jekyll SEO tag v2.8.0 -->
<meta name="generator" content="Jekyll v4.3.4" />
<meta property="og:title" content="Creating Parsers" />
<meta property="og:locale" content="en" />
<meta name="description" content="A documentation site for BeDoc." />
<meta property="og:description" content="A documentation site for BeDoc." />
<link rel="canonical" href="http://localhost:4000/parsers.html" />
<meta property="og:url" content="http://localhost:4000/parsers.html" />
<meta property="og:site_name" content="BeDoc" />
<meta property="og:type" content="website" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Creating Parsers" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"WebPage","description":"A documentation site for BeDoc.","headline":"Creating Parsers","url":"http://localhost:4000/parsers.html"}</script>
<!-- End Jekyll SEO tag -->


  <title>Creating Parsers | BeDoc
  </title>

  <!--
  The Favicons for Web, Android, Microsoft, and iOS (iPhone and iPad) Apps
  Generated by: https://realfavicongenerator.net/
-->



<link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png">

  <link rel="manifest" href="/assets/img/favicons/site.webmanifest">

<link rel="shortcut icon" href="/assets/img/favicons/favicon.ico">
<meta name="apple-mobile-web-app-title" content="BeDoc">
<meta name="application-name" content="BeDoc">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml">
<meta name="theme-color" content="#ffffff">


  <!-- Resource Hints -->
  
    
      
        <link rel="preconnect" href="https://fonts.googleapis.com" >
      
        <link rel="dns-prefetch" href="https://fonts.googleapis.com" >
      
    
      
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
      
        <link rel="dns-prefetch" href="https://fonts.gstatic.com" >
      
    
      
        <link rel="preconnect" href="https://cdn.jsdelivr.net" >
      
        <link rel="dns-prefetch" href="https://cdn.jsdelivr.net" >
      
    
  

  <!-- Bootstrap -->
  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  

  <!-- Theme style -->
  <link rel="stylesheet" href="/assets/css/jekyll-theme-chirpy.css">

  <!-- Web Font -->
  <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato:wght@300;400&family=Source+Sans+Pro:wght@400;600;700;900&display=swap">

  <!-- Font Awesome Icons -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.7.1/css/all.min.css">

  <!-- 3rd-party Dependencies -->

  

  
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.min.css">
  

  
    <!-- Image Popup -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox@3.3.0/dist/css/glightbox.min.css">
  

  <!-- Scripts -->

  <script src="/assets/js/dist/theme.min.js"></script>

  <!-- JS selector for site. -->

<!-- commons -->



<!-- layout specified -->


  

  
    <!-- image lazy-loading & popup & clipboard -->
    
  















  
    

    

  

  
    

    

  

  
    

    

  

  
    

    

  



  <script defer src="https://cdn.jsdelivr.net/combine/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js,npm/loading-attribute-polyfill@2.1.1/dist/loading-attribute-polyfill.umd.min.js,npm/glightbox@3.3.0/dist/js/glightbox.min.js,npm/clipboard@2.0.11/dist/clipboard.min.js"></script>







<script defer src="/assets/js/dist/page.min.js"></script>



<!-- Pageviews -->



  

  <!-- A placeholder to allow defining custom metadata -->

</head>


  <body>
    <!-- The Side Bar -->

<aside aria-label="Sidebar" id="sidebar" class="d-flex flex-column align-items-end">
  <header class="profile-wrapper">
    <a href="/" id="avatar" class="rounded-circle"></a>

    <a class="site-title d-block" href="/">BeDoc</a>
    <p class="site-subtitle fst-italic mb-0">Bespoke Documentation</p>
  </header>
  <!-- .profile-wrapper -->

  <nav class="flex-column flex-grow-1 w-100 ps-0">
    <ul class="nav">
      <!-- home -->
      <li class="nav-item">
        <a href="/" class="nav-link">
          <i class="fa-fw fas fa-home"></i>
          <span>HOME</span>
        </a>
      </li>
      <!-- the real tabs -->
      
        <li class="nav-item">
          <a href="/categories/" class="nav-link">
            <i class="fa-fw fas fa-stream"></i>
            

            <span>CATEGORIES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/tags/" class="nav-link">
            <i class="fa-fw fas fa-tags"></i>
            

            <span>TAGS</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/archives/" class="nav-link">
            <i class="fa-fw fas fa-archive"></i>
            

            <span>ARCHIVES</span>
          </a>
        </li>
        <!-- .nav-item -->
      
        <li class="nav-item">
          <a href="/about/" class="nav-link">
            <i class="fa-fw fas fa-info-circle"></i>
            

            <span>ABOUT</span>
          </a>
        </li>
        <!-- .nav-item -->
      
    </ul>
  </nav>

  <div class="sidebar-bottom d-flex flex-wrap  align-items-center w-100">
    
      <button type="button" class="btn btn-link nav-link" aria-label="Switch Mode" id="mode-toggle">
        <i class="fas fa-adjust"></i>
      </button>

      
        <span class="icon-border"></span>
      
    

    
      

      
        <a
          href="https://github.com/gesslar"
          aria-label="github"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fab fa-github"></i>
        </a>
      
    
      

      
        <a
          href="/feed.xml"
          aria-label="rss"
          

          

          

          
        >
          <i class="fas fa-rss"></i>
        </a>
      
    
      

      
        <a
          href="https://mastodon.online/@gesslar"
          aria-label="mastodon"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer me"
          
        >
          <i class="fab fa-mastodon"></i>
        </a>
      
    
      

      
        <a
          href="https://bsky.app/profile/gesslar.dev"
          aria-label="bluesky"
          

          
            target="_blank"
            
          

          

          
            rel="noopener noreferrer"
          
        >
          <i class="fa-brands fa-bluesky"></i>
        </a>
      
    
  </div>
  <!-- .sidebar-bottom -->
</aside>
<!-- #sidebar -->


    <div id="main-wrapper" class="d-flex justify-content-center">
      <div class="container d-flex flex-column px-xxl-5">
        <!-- The Top Bar -->

<header id="topbar-wrapper" aria-label="Top Bar">
  <div
    id="topbar"
    class="d-flex align-items-center justify-content-between px-lg-3 h-100"
  >
    <nav id="breadcrumb" aria-label="Breadcrumb">
      

      
        
          
            <span>
              <a href="/">Home</a>
            </span>

          
        
          
            
              <span>Creating Parsers</span>
            

          
        
      
    </nav>
    <!-- endof #breadcrumb -->

    <button type="button" id="sidebar-trigger" class="btn btn-link">
      <i class="fas fa-bars fa-fw"></i>
    </button>

    <div id="topbar-title">
      Creating Parsers
    </div>

    <button type="button" id="search-trigger" class="btn btn-link">
      <i class="fas fa-search fa-fw"></i>
    </button>

    <search id="search" class="align-items-center ms-3 ms-lg-0">
      <i class="fas fa-search fa-fw"></i>
      <input
        class="form-control"
        id="search-input"
        type="search"
        aria-label="search"
        autocomplete="off"
        placeholder="Search..."
      >
    </search>
    <button type="button" class="btn btn-link text-decoration-none" id="search-cancel">Cancel</button>
  </div>
</header>


        <div class="row flex-grow-1">
          <main aria-label="Main Content" class="col-12 col-lg-11 col-xl-9 px-md-4">
            
              <!-- Refactor the HTML structure -->



<!--
  In order to allow a wide table to scroll horizontally,
  we suround the markdown table with `<div class="table-wrapper">` and `</div>`
-->



<!--
  Fixed kramdown code highlight rendering:
  https://github.com/penibelst/jekyll-compress-html/issues/101
  https://github.com/penibelst/jekyll-compress-html/issues/71#issuecomment-188144901
-->



<!-- Change the icon of checkbox -->



<!-- Handle images -->





<!-- Add header for code snippets -->



<!-- Create heading anchors -->





  
  

  
    
    

    
      
        
        
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    
      

      
      

      
      
      

      
    

    
  

  
  

  

  
  

  

  
  

  




<!-- return -->




<article class="px-1">
  
    
    
    <h1 class="dynamic-title">
      Creating Parsers
    </h1>
    <div class="content">
      <h1 id="creating-parsers-for-bedoc">Creating Parsers for BeDoc</h1>

<p>This guide explains how to create custom parsers for BeDoc. Parsers are
responsible for analyzing source code and extracting documentation information
in a structured format.</p>

<h2 id="parser-structure"><span class="me-2">Parser Structure</span><a href="#parser-structure" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>A BeDoc parser consists of two main parts:</p>

<ol>
  <li><strong>Meta Information</strong>: Defines the language and file extension.</li>
  <li><strong>Parser Class</strong>: Implements the parsing logic.</li>
</ol>

<p>Here’s the basic structure:</p>

<div class="language-javascript highlighter-rouge"><div class="code-header">
        <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
</pre></td><td class="rouge-code"><pre><span class="c1">// Define meta information</span>
<span class="k">export</span> <span class="kd">const</span> <span class="nx">meta</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">language</span><span class="p">:</span> <span class="dl">"</span><span class="s2">mylang</span><span class="dl">"</span><span class="p">,</span>      <span class="c1">// Language identifier</span>
  <span class="na">languageExtension</span><span class="p">:</span> <span class="dl">"</span><span class="s2">.ml</span><span class="dl">"</span> <span class="c1">// File extension</span>
<span class="p">}</span>

<span class="c1">// Implement the parser class</span>
<span class="k">export</span> <span class="kd">class</span> <span class="nc">Parser</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="nx">core</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">core</span> <span class="o">=</span> <span class="nx">core</span> <span class="c1">// Access to BeDoc core utilities</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nf">parse</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
    <span class="c1">// Parse the content and return a response</span>
    <span class="k">return</span> <span class="p">{</span>
      <span class="na">status</span><span class="p">:</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">,</span>
      <span class="na">result</span><span class="p">:</span> <span class="p">{</span>
        <span class="nx">file</span><span class="p">,</span>
        <span class="na">raw</span><span class="p">:</span> <span class="nx">content</span><span class="p">,</span>
        <span class="na">funcs</span><span class="p">:</span> <span class="p">[]</span> <span class="c1">// Array of parsed functions</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="response-format"><span class="me-2">Response Format</span><a href="#response-format" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>The parser’s <code class="language-plaintext highlighter-rouge">parse</code> method must return a response object with the following
structure:</p>

<div class="language-javascript highlighter-rouge"><div class="code-header">
        <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre></td><td class="rouge-code"><pre><span class="c1">// Success response</span>
<span class="p">{</span>
  <span class="nl">status</span><span class="p">:</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">,</span>
  <span class="nx">result</span><span class="p">:</span> <span class="p">{</span>
    <span class="nl">file</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>     <span class="c1">// Source file path</span>
    <span class="nx">raw</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>      <span class="c1">// Original file content</span>
    <span class="nx">funcs</span><span class="p">:</span> <span class="p">[</span>         <span class="c1">// Array of parsed functions</span>
      <span class="p">{</span>
        <span class="na">name</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>           <span class="c1">// Function name</span>
        <span class="na">description</span><span class="p">:</span> <span class="nx">string</span><span class="p">[],</span>  <span class="c1">// Function description</span>
        <span class="na">params</span><span class="p">:</span> <span class="p">[</span>               <span class="c1">// Function parameters</span>
          <span class="p">{</span>
            <span class="na">type</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>       <span class="c1">// Parameter type</span>
            <span class="na">name</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>       <span class="c1">// Parameter name</span>
            <span class="na">content</span><span class="p">:</span> <span class="nx">string</span><span class="p">[]</span>   <span class="c1">// Parameter description</span>
          <span class="p">}</span>
        <span class="p">],</span>
        <span class="na">return</span><span class="p">:</span> <span class="p">{</span>               <span class="c1">// Return value info</span>
          <span class="na">type</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>         <span class="c1">// Return type</span>
          <span class="na">content</span><span class="p">:</span> <span class="nx">string</span><span class="p">[]</span>     <span class="c1">// Return description</span>
        <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">]</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Error response</span>
<span class="p">{</span>
  <span class="na">status</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">file</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>       <span class="c1">// Source file path</span>
  <span class="na">line</span><span class="p">:</span> <span class="nx">string</span><span class="p">,</span>       <span class="c1">// Problematic line</span>
  <span class="na">lineNumber</span><span class="p">:</span> <span class="nx">number</span><span class="p">,</span> <span class="c1">// Line number where error occurred</span>
  <span class="na">message</span><span class="p">:</span> <span class="nx">string</span>     <span class="c1">// Error description</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="core-utilities"><span class="me-2">Core Utilities</span><a href="#core-utilities" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>The parser has access to BeDoc’s core utilities through <code class="language-plaintext highlighter-rouge">this.core</code>:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">this.core.logger</code>: Logging functions (debug, info, warn, error)</li>
  <li><code class="language-plaintext highlighter-rouge">this.core.string</code>: String manipulation utilities</li>
  <li><code class="language-plaintext highlighter-rouge">this.core.valid</code>: Validation utilities</li>
  <li><code class="language-plaintext highlighter-rouge">this.core.data</code>: Data structure utilities</li>
  <li><code class="language-plaintext highlighter-rouge">this.core.fdUtil</code>: File system utilities</li>
</ul>

<h2 id="hook-support"><span class="me-2">Hook Support</span><a href="#hook-support" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Parsers automatically support <a href="hooks.md">hooks</a>, allowing users to modify the
parsing process. Hook points include:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">START</code>: Before parsing begins</li>
  <li><code class="language-plaintext highlighter-rouge">FILE_LOAD</code>: When a file is loaded</li>
  <li><code class="language-plaintext highlighter-rouge">SECTION_LOAD</code>: When a documentation section is found</li>
  <li><code class="language-plaintext highlighter-rouge">END</code>: After parsing completes</li>
</ul>

<h2 id="example-implementation"><span class="me-2">Example Implementation</span><a href="#example-implementation" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>Here’s a simplified example of a documentation parser:</p>

<div class="language-javascript highlighter-rouge"><div class="code-header">
        <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
38
39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66
67
68
</pre></td><td class="rouge-code"><pre><span class="k">export</span> <span class="kd">const</span> <span class="nx">meta</span> <span class="o">=</span> <span class="p">{</span>
  <span class="na">language</span><span class="p">:</span> <span class="dl">"</span><span class="s2">example</span><span class="dl">"</span><span class="p">,</span>
  <span class="na">languageExtension</span><span class="p">:</span> <span class="dl">"</span><span class="s2">.ex</span><span class="dl">"</span>
<span class="p">}</span>

<span class="k">export</span> <span class="kd">class</span> <span class="nc">Parser</span> <span class="p">{</span>
  <span class="nf">constructor</span><span class="p">(</span><span class="nx">core</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">core</span> <span class="o">=</span> <span class="nx">core</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">patterns</span> <span class="o">=</span> <span class="p">{</span>
      <span class="na">docStart</span><span class="p">:</span> <span class="sr">/^</span><span class="se">\s</span><span class="sr">*</span><span class="se">\/\*\*(</span><span class="sr">.*</span><span class="se">)</span><span class="sr">$/</span><span class="p">,</span>    <span class="c1">// /** Start of doc block</span>
      <span class="na">docEnd</span><span class="p">:</span> <span class="sr">/^</span><span class="se">\s</span><span class="sr">*</span><span class="se">\*\/\s</span><span class="sr">*$/</span><span class="p">,</span>         <span class="c1">// */ End of doc block</span>
      <span class="na">docLine</span><span class="p">:</span> <span class="sr">/^</span><span class="se">\s</span><span class="sr">*</span><span class="se">\*\s?(</span><span class="sr">.*</span><span class="se">)</span><span class="sr">$/</span><span class="p">,</span>      <span class="c1">// * Documentation line</span>
      <span class="na">funcDef</span><span class="p">:</span> <span class="sr">/^function</span><span class="se">\s</span><span class="sr">+</span><span class="se">(\w</span><span class="sr">+</span><span class="se">)</span><span class="sr">/</span>    <span class="c1">// Function definition</span>
    <span class="p">}</span>
  <span class="p">}</span>

  <span class="k">async</span> <span class="nf">parse</span><span class="p">(</span><span class="nx">file</span><span class="p">,</span> <span class="nx">content</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">try</span> <span class="p">{</span>
      <span class="kd">const</span> <span class="nx">lines</span> <span class="o">=</span> <span class="nx">content</span><span class="p">.</span><span class="nf">split</span><span class="p">(</span><span class="sr">/</span><span class="se">\r?\n</span><span class="sr">/</span><span class="p">)</span>
      <span class="kd">const</span> <span class="nx">funcs</span> <span class="o">=</span> <span class="p">[]</span>
      <span class="kd">let</span> <span class="nx">currentFunc</span> <span class="o">=</span> <span class="kc">null</span>
      <span class="kd">let</span> <span class="nx">inDoc</span> <span class="o">=</span> <span class="kc">false</span>

      <span class="k">for </span><span class="p">(</span><span class="kd">let</span> <span class="nx">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">lines</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">const</span> <span class="nx">line</span> <span class="o">=</span> <span class="nx">lines</span><span class="p">[</span><span class="nx">i</span><span class="p">]</span>

        <span class="k">if </span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">docStart</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="nx">line</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">inDoc</span> <span class="o">=</span> <span class="kc">true</span>
          <span class="nx">currentFunc</span> <span class="o">=</span> <span class="p">{</span> <span class="na">description</span><span class="p">:</span> <span class="p">[]</span> <span class="p">}</span>
          <span class="k">continue</span>
        <span class="p">}</span>

        <span class="k">if </span><span class="p">(</span><span class="nx">inDoc</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">docEnd</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="nx">line</span><span class="p">))</span> <span class="p">{</span>
          <span class="nx">inDoc</span> <span class="o">=</span> <span class="kc">false</span>
          <span class="k">continue</span>
        <span class="p">}</span>

        <span class="k">if </span><span class="p">(</span><span class="nx">inDoc</span> <span class="o">&amp;&amp;</span> <span class="k">this</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">docLine</span><span class="p">.</span><span class="nf">test</span><span class="p">(</span><span class="nx">line</span><span class="p">))</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="p">[,</span> <span class="nx">content</span><span class="p">]</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">docLine</span><span class="p">.</span><span class="nf">exec</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span>
          <span class="nx">currentFunc</span><span class="p">.</span><span class="nx">description</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">content</span><span class="p">)</span>
          <span class="k">continue</span>
        <span class="p">}</span>

        <span class="k">if </span><span class="p">(</span><span class="o">!</span><span class="nx">inDoc</span> <span class="o">&amp;&amp;</span> <span class="nx">currentFunc</span><span class="p">)</span> <span class="p">{</span>
          <span class="kd">const</span> <span class="nx">funcMatch</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="nx">patterns</span><span class="p">.</span><span class="nx">funcDef</span><span class="p">.</span><span class="nf">exec</span><span class="p">(</span><span class="nx">line</span><span class="p">)</span>
          <span class="k">if </span><span class="p">(</span><span class="nx">funcMatch</span><span class="p">)</span> <span class="p">{</span>
            <span class="nx">currentFunc</span><span class="p">.</span><span class="nx">name</span> <span class="o">=</span> <span class="nx">funcMatch</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
            <span class="nx">funcs</span><span class="p">.</span><span class="nf">push</span><span class="p">(</span><span class="nx">currentFunc</span><span class="p">)</span>
            <span class="nx">currentFunc</span> <span class="o">=</span> <span class="kc">null</span>
          <span class="p">}</span>
        <span class="p">}</span>
      <span class="p">}</span>

      <span class="k">return</span> <span class="p">{</span>
        <span class="na">status</span><span class="p">:</span> <span class="dl">"</span><span class="s2">success</span><span class="dl">"</span><span class="p">,</span>
        <span class="na">result</span><span class="p">:</span> <span class="p">{</span> <span class="nx">file</span><span class="p">,</span> <span class="na">raw</span><span class="p">:</span> <span class="nx">content</span><span class="p">,</span> <span class="nx">funcs</span> <span class="p">}</span>
      <span class="p">}</span>
    <span class="p">}</span> <span class="k">catch </span><span class="p">(</span><span class="nx">error</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">return</span> <span class="p">{</span>
        <span class="na">status</span><span class="p">:</span> <span class="dl">"</span><span class="s2">error</span><span class="dl">"</span><span class="p">,</span>
        <span class="nx">file</span><span class="p">,</span>
        <span class="na">line</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="na">lineNumber</span><span class="p">:</span> <span class="kc">null</span><span class="p">,</span>
        <span class="na">message</span><span class="p">:</span> <span class="nx">error</span><span class="p">.</span><span class="nx">message</span>
      <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></td></tr></tbody></table></code></div></div>

<h2 id="best-practices"><span class="me-2">Best Practices</span><a href="#best-practices" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<ol>
  <li>
    <p><strong>Error Handling</strong>: Always return appropriate error responses with detailed
messages and line numbers when possible.</p>
  </li>
  <li>
    <p><strong>Async Support</strong>: Make your parser async to handle large files efficiently and
support async hooks.</p>
  </li>
  <li>
    <p><strong>Validation</strong>: Validate input parameters and document structure before
processing.</p>
  </li>
  <li><strong>Logging</strong>: Use the core logger for debugging and error tracking:
    <div class="language-javascript highlighter-rouge"><div class="code-header">
        <span data-label-text="JavaScript"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
</pre></td><td class="rouge-code"><pre><span class="k">this</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nf">debug</span><span class="p">(</span><span class="dl">"</span><span class="s2">Processing file...</span><span class="dl">"</span><span class="p">)</span>
<span class="k">this</span><span class="p">.</span><span class="nx">core</span><span class="p">.</span><span class="nx">logger</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="dl">"</span><span class="s2">Failed to parse line</span><span class="dl">"</span><span class="p">)</span>
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li><strong>State Management</strong>: Keep track of parser state (e.g., inside comment block,
current function) clearly and reset it appropriately.</li>
</ol>

<h2 id="testing-your-parser"><span class="me-2">Testing Your Parser</span><a href="#testing-your-parser" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>BeDoc provides multiple ways to test your parsers:</p>

<ol>
  <li><strong>Mock Mode</strong>: Test using a local mock environment:
    <div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
</pre></td><td class="rouge-code"><pre>bedoc <span class="nt">--mock</span> ./my-parser <span class="nt">-l</span> mylang <span class="nt">-f</span> markdown <span class="nt">-i</span> <span class="nb">test</span>/<span class="k">*</span>.ml <span class="nt">-o</span> <span class="nb">test</span>/docs
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
  <li><strong>Direct File Usage</strong>: Test your parser file directly without installation:
    <div class="language-bash highlighter-rouge"><div class="code-header">
        <span data-label-text="Shell"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
</pre></td><td class="rouge-code"><pre>bedoc <span class="nt">--parser</span> ./my-parser.js <span class="nt">--printer</span> markdown <span class="nt">-i</span> <span class="nb">test</span>/<span class="k">*</span>.ml <span class="nt">-o</span> <span class="nb">test</span>/docs
<span class="c"># Or use the short form</span>
bedoc <span class="nt">-p</span> ./my-parser.js <span class="nt">-r</span> markdown <span class="nt">-i</span> <span class="nb">test</span>/<span class="k">*</span>.ml <span class="nt">-o</span> <span class="nb">test</span>/docs
</pre></td></tr></tbody></table></code></div>    </div>
  </li>
</ol>

<p>These options allow you to rapidly iterate on your parser implementation without
needing to package and install it first. The direct file usage is particularly
helpful during initial development and debugging.</p>

<h2 id="publishing-your-parser"><span class="me-2">Publishing Your Parser</span><a href="#publishing-your-parser" class="anchor text-muted"><i class="fas fa-hashtag"></i></a></h2>

<p>When ready to publish, package your parser following BeDoc’s naming and structure
conventions:</p>

<div class="language-json highlighter-rouge"><div class="code-header">
        <span data-label-text="JSON"><i class="fas fa-code fa-fw small"></i></span>
      <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre></td><td class="rouge-code"><pre><span class="p">{</span><span class="w">
  </span><span class="nl">"name"</span><span class="p">:</span><span class="w"> </span><span class="s2">"bedoc-mylang-parser"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1.0.0"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"module"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"MyLang parser for BeDoc"</span><span class="p">,</span><span class="w">
  </span><span class="nl">"bedoc"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nl">"parsers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"./bedoc-mylang-parser.js"</span><span class="w">
    </span><span class="p">]</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></td></tr></tbody></table></code></div></div>

<p>This structure allows BeDoc to automatically discover and load your parser when installed.</p>

    </div>
  
</article>


            
          </main>

          <!-- panel -->
          <aside aria-label="Panel" id="panel-wrapper" class="col-xl-3 ps-2 text-muted">
            <div class="access">
              <!-- Get 5 last posted/updated posts -->















              <!-- The trending tags list -->


















            </div>

            
          </aside>
        </div>

        <div class="row">
          <!-- tail -->
          <div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 px-md-4">
            

            <!-- The Footer -->

<footer
  aria-label="Site Info"
  class="
    d-flex flex-column justify-content-center text-muted
    flex-lg-row justify-content-lg-between align-items-lg-center pb-lg-3
  "
>
  <p>©
    <time>2025</time>

    
      <a href="https://github.com/gesslar">gesslar</a>.
    

    
      <span
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author."
      >Some rights reserved.</span>
    
  </p>

  <p>Using the <a
        data-bs-toggle="tooltip"
        data-bs-placement="top"
        title="v7.2.4"
        href="https://github.com/cotes2020/jekyll-theme-chirpy"
        target="_blank"
        rel="noopener"
      >Chirpy</a> theme for <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a>.
  </p>
</footer>

          </div>
        </div>

        <!-- The Search results -->

<div id="search-result-wrapper" class="d-flex justify-content-center d-none">
  <div class="col-11 content">
    <div id="search-hints">
      <!-- The trending tags list -->


















    </div>
    <div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div>
  </div>
</div>

      </div>

      <aside aria-label="Scroll to Top">
        <button id="back-to-top" type="button" class="btn btn-lg btn-box-shadow">
          <i class="fas fa-angle-up"></i>
        </button>
      </aside>
    </div>

    <div id="mask" class="d-none position-fixed w-100 h-100 z-1"></div>

    
      <aside
  id="notification"
  class="toast"
  role="alert"
  aria-live="assertive"
  aria-atomic="true"
  data-bs-animation="true"
  data-bs-autohide="false"
>
  <div class="toast-header">
    <button
      type="button"
      class="btn-close ms-auto"
      data-bs-dismiss="toast"
      aria-label="Close"
    ></button>
  </div>
  <div class="toast-body text-center pt-0">
    <p class="px-2 mb-3">A new version of content is available.</p>
    <button type="button" class="btn btn-primary" aria-label="Update">
      Update
    </button>
  </div>
</aside>

    

    <!-- Embedded scripts -->

    

    <!--
  Jekyll Simple Search loader
  See: <https://github.com/christian-fei/Simple-Jekyll-Search>
-->





<script>
  
  document.addEventListener('DOMContentLoaded', () => {
    SimpleJekyllSearch({
      searchInput: document.getElementById('search-input'),
      resultsContainer: document.getElementById('search-results'),
      json: '/assets/js/data/search.json',
      searchResultTemplate: '  <article class="px-1 px-sm-2 px-lg-4 px-xl-0">    <header>      <h2><a href="{url}">{title}</a></h2>      <div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1">        {categories}        {tags}      </div>    </header>    <p>{snippet}</p>  </article>',
      noResultsText: '<p class="mt-5">Oops! No results found.</p>',
      templateMiddleware: function(prop, value, template) {
        if (prop === 'categories') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div class="me-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`;
          }
        }

        if (prop === 'tags') {
          if (value === '') {
            return `${value}`;
          } else {
            return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`;
          }
        }
      }
    });
  });
</script>

  </body>
</html>

